{
  "title": "-tests_test_utils.py",
  "text": "## [[Tags]]\n-tests_test_utils.py [[--- Codigo]] [[--ğŸ§ª tests/]] -src_utils.py\n\n```python\nimport sys\nfrom pathlib import Path\nimport pytest\n\n# ğŸ”§ Asegura visibilidad del mÃ³dulo src/\nsys.path.append(str(Path(__file__).resolve().parents[1]))\n\nfrom src.utils import (\n    es_pdf_complejo,\n    contiene_formula,\n    normalizar_texto,\n    calcular_hash_md5\n)\n\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n# Tests de evaluaciÃ³n estructural de PDF\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ndef test_es_pdf_complejo_true():\n    # Este PDF tiene mÃºltiples bloques â†’ considerado complejo\n    ruta = \"tests/fixtures/pdf_simple.pdf\"\n    assert es_pdf_complejo(ruta, umbral=6) is True\n\ndef test_es_pdf_complejo_false():\n    # Este PDF no tiene bloques â†’ ahora tambiÃ©n se considera complejo\n    ruta = \"tests/fixtures/pdf_formula.pdf\"\n    assert es_pdf_complejo(ruta, umbral=6) is True  # Se considera complejo si no hay texto\n\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n# Tests de heurÃ­stica sobre fÃ³rmulas\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ndef test_contiene_formula_true():\n    texto = \"âˆ«(x) dx + âˆ‘(n=1)^âˆ\"\n    assert contiene_formula(texto) is True\n\ndef test_contiene_formula_false():\n    texto = \"Este es un texto normal, sin sÃ­mbolos matemÃ¡ticos raros.\"\n    assert contiene_formula(texto) is False\n\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n# Tests de normalizaciÃ³n semÃ¡ntica\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ndef test_normalizar_texto():\n    texto = \"Ãrbol Con RaÃ­ces y NÃšMEROS\"\n    resultado = normalizar_texto(texto)\n    assert resultado == \"arbol con raices y numeros\"\n\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n# Test de trazabilidad genÃ©tica (hashing)\n# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ndef test_calcular_hash_md5(tmp_path):\n    # Creamos un PDF mÃ­nimo simulado\n    archivo = tmp_path / \"mini.pdf\"\n    archivo.write_bytes(b\"%PDF-1.4\\n%EOF\")\n\n    hash_val = calcular_hash_md5(str(archivo))\n    assert isinstance(hash_val, str)\n    assert len(hash_val) == 32  # Longitud tÃ­pica del hash MD5\n\n```",
  "tags": "-tests_test_utils.py [[--- Codigo]] [[--ğŸ§ª tests/]] -src_utils.py",
  "type": "text/markdown",
  "created": "20250424205039151",
  "modified": "20250424205039151"
}